# 文件操作

 程序设计中，文件有两种：程序文件，数据文件。

## 文件的打开与关闭

### 文件指针

缓冲文件系统中，关键的概念是“文件类型指针”。

每个被使用的文件都在内存中开辟了一个相应的文件信息区，用来存放文件的相关信息（如文件的名字，文件状态及文件当前的位置等）。这些信息是保存在一个结构体变量中的。该结构体类型是有系统声明的，取名FILE.

文件指针：

```c
FILE * ptr;
```

## 文件的打开

```C
//打开文件
FILE * fopen ( const char * filename, const char * mode );
//关闭文件
int fclose ( FILE * stream );
```

文件使用方式          含义                                                                     如果指定文件不存在
“r”（只读）          为了输入数据，打开一个已经存在的文本文件         出错
“w”（只写） 为了输出数据，打开一个文本文件                                 建立一个新的文件
“a”（追加） 向文本文件尾添加数据                                                  建立一个新的文件
“rb”（只读） 为了输入数据，打开一个二进制文件 出错
“wb”（只写） 为了输出数据，打开一个二进制文件 建立一个新的文件
“ab”（追加） 向一个二进制文件尾添加数据 出错
“r+”（读写） 为了读和写，打开一个文本文件 出错
“w+”（读写） 为了读和写，建议一个新的文件 建立一个新的文件
“a+”（读写） 打开一个文件，在文件尾进行读写 建立一个新的文件
“rb+”（读写） 为了读和写打开一个二进制文件 出错
“wb+”（读写） 为了读和写，新建一个新的二进制文件 建立一个新的文件
“ab+”（读写） 打开一个二进制文件，在文件尾进行读和写 建立一个新的文件

```c
#include <stdio.h>
int main ()
{
  FILE * pFile;
  //打开文件
  pFile = fopen ("myfile.txt","w");
  //文件操作
  if (pFile!=NULL)
  {
    fputs ("fopen example",pFile);
    //关闭文件
    fclose (pFile);
  }
  return 0;
}
```

## 文件的顺序读写

功能 函数名 适用于
字符输入函数 fgetc 所有输入流
字符输出函数 fputc 所有输出流
文本行输入函数 fgets 所有输入流
文本行输出函数 fputs 所有输出流
格式化输入函数 fscanf 所有输入流
格式化输出函数 fprintf 所有输出流
二进制输入 fread 文件
二进制输出 fwrite 文件